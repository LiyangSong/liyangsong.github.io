{{ define "main" }}

<div class="post-list-container post-list-container-shadow">

  <a class="a-block">
    <div class="post-item-wrapper post-item-wrapper-no-hover">
      <div class="post-item post-item-no-gaps">
        <div class="post-item-info-wrapper">
          <div class="post-item-title post-item-title-small">
            {{.Title}}
          </div>
        </div>
      </div>
    </div>
  </a>

  {{ if eq .Title "Categories" }}
  <div class="categories-container">
    {{ range .Data.Terms }}
    <a href="{{.Page.RelPermalink}}">
      {{- partial "category_card.html" . -}}
    </a>
    {{ end }}
  </div>

  {{ else if eq .Title "Projects" }}
    {{ $projects := .Pages.ByWeight }}
    <div class="projects-list">
      {{ range $index, $proj := $projects }}
        {{ $href := or $proj.Params.github $proj.RelPermalink }}
        <a class="a-block project-row" href="{{ $href }}" {{ if $proj.Params.github }}target="_blank" rel="noopener"{{ end }}>
          <div class="project-thumb">
            {{ with $proj.Params.image }}
              <img src="{{ . | absURL }}" alt="{{ $proj.Title }} thumbnail" loading="lazy">
            {{ end }}
          </div>
          <div class="project-info">
            <div class="project-title">{{ $proj.Title }}</div>
            <div class="project-description">{{ $proj.Params.description }}</div>
          </div>
        </a>
        {{ if lt $index (sub (len $projects) 1) }}
          <hr class="project-divider">
        {{ end }}
      {{ end }}
    </div>

  {{ else }}
    <div class="tags">
      {{ range .Data.Terms }}
      <div class="tag">
        <a href="{{.Page.RelPermalink}}" class="btn btn-outline-secondary position-relative rounded-pill">
          {{.Page.Title}}
          <span class="badge">({{.Count}})</span>
        </a>
      </div>
      {{ end }}
    </div>
  {{ end }}
</div>


{{ end }}
